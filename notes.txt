---
D Interpretability: After clustering, inspect top terms (via TF-IDF within clusters) to qualitatively evaluate if clusters make sense thematically or semantically.
D Human-in-the-loop check:
    Show random samples from clusters and verify if similar articles are indeed clustered together. Evaluate the quality of cluster labels or keywords extracted from each embedding.
---------
1. Compute Embeddings:
TF-IDF embeddings â†’ Sparse, high-dimensional vectors.
SBERT embeddings â†’ Dense, semantic vectors.
2. Project Both Using UMAP:
TODO: Use identical UMAP parameters for both embeddings (e.g., n_neighbors=15, min_dist=0.1, metric='cosine' for consistency).
----
D To achieve explainability comparable to TF-IDF:
    Use SBERT embeddings to cluster semantically meaningful groups.
    Then apply TF-IDF or KeyBERT keyword extraction to each cluster independently, gaining TF-IDF-like interpretability at the end.

D On preprocessed tokens extract keywords

-------- TODO: should I normalize or to 50D?
WORKS umap to 50D -> noralize(cosine dist) -> hbdscan 
TODO: is there upper bound other than time for clusterin ... should you reduce dims at all?

D TODO: tfidf image


D NPMI Output	Coherence scores per cluster (e.g. NPMI)	Similarity stats per cluster (intra/inter)
Tko kt semantic similarity je pac precej visok povsod, ker clustering dela dobro?
Zato uporabljene tiste tri metrike, predvsem pa silhueta in analiza ter vizualnost 

TODO: why are npmi keywords almost the same and not better?
OD TU -------
âœ… When to Use Each
NPMI: For keyword coherence
Cosine similarity: For semantic tightness in embedding space
    Together, they give a well-rounded view:

    Do words co-occur?
    Are texts semantically similar?
    Do generated cluster labels reflect the content?

TODO: pmi/npmi keyword extraction ------
Instead of just picking top TF-IDF words, you rank combinations of words that co-occur more than expected. That way, you get:

Thematically consistent words
Fewer irrelevant or generic words (like â€œdejalaâ€ or â€œlahkoâ€)
Words that tend to appear together in the same context
âœ… Example Use: Gensimâ€™s CoherenceModel
You can do something like:

âœ… Compared to TF-IDF
Feature	TF-IDF	PMI/NPMI
Focus	Individual word frequency	Word pairs and co-occurrence
Pros	Simple, fast	Captures topical coherence
Common artifacts	Words like â€œdejalaâ€, â€œletoâ€, etc.	Fewer generic terms
Interpretability	Medium	High (shows word relationships)
Language dependent?	Somewhat	Less so â€” works on token co-occurrence
DO TU -------- basically poves da se isto obnasata, ker so semanticno kr tight te clustri in je jasno kere besede occurajo najbl 
TODO: check ... ce sploh hoces govort o tem


LLMs are not the way, mogoce bolj vezano vendar halucinirajo.
I would use human interpretation
... poves da s pomocjo vecih metod za keyword extraction. Raje ne summary LLMs ker tudi tukaj halucinirajo vse Å¾ivo in Äe jim
daÅ¡ par leadov iz clustra bodo zlo fokusirali na toÄen event v tem Älanku ne tematika. VeÄ leadov pa je prezahtevno
V smislu ÄloveÅ¡ke analize, bi pa tudi katere clustre roÄno potem zdruÅ¾il Äe bi dejansko uporabljal te podatke...

Ukraine has to help Slovenia and Ukraine has to help Russia

Ilka Stuhec enters fifth best time at world's first world in royal discipline

The government has confirmed the source of the legislation on the ownership of workers .

Los Angeles Kings win series

Slovenia has banned the transport of dead and displaced animals

Divaa is a city in the southwestern part of the country .

Dallas' coaches played the 45th series of finals in the league of basketball , and until now only two games were eliminated from 4:0 .

In the car, we made the first mile with a new damage to the tire, which is technically similar to the superpower, so this time we looked a little more detailed about what the new one brings. It's gonna be a lot of years before electric vehicles are blown off the roads with internal combustion engines. At Volvo, only 100% of electric vehicles were thought to be manufactured. The executive director of Volva Jim Rowan was moved to change.

electric cars are a big part of the electric car industry .

The Four concert will be broadcast live on Slovenian TV on 23 September at 20 a.m.

ğŸ§  Cluster 0 KOÅ ARKA â†’ igra, skok, toÄka, tekma, donÄiÄ‡, podaj, dallas, sezona, minuta, dober, met, Äetrtina, leto, liga, zadnji, igra skok, zmaga, ekipa, trojka, nba
size of cluster: 701
ğŸ§  Cluster 1 HOKEJ â†’ tekma, gol, minuta, kopitar, los, zmaga, angeles, sezona, los angeles, strel, tretjina, edmonton, toÄka, kralj, zadnji, liga, konÄnica, obramba, ekipa, mreÅ¾a
size of cluster: 214
ğŸ§  Cluster 2 TENIS â†’ niz, igra, turnir, zda, finale, leto, Ä‘okoviÄ‡, dvoboj, sinner, rus, dober, jorgiÄ‡, igralec, olimpijski, zmaga, servis, fra, alcaraz, toÄka, polfinale
size of cluster: 522
ğŸ§  Cluster 3 DIRKANJE - TUDI KOLESARJENJE â†’ dirka, etapa, pogaÄar, leto, mesto, ekipa, zmaga, dober, sezona, kolesar, cilj, rogliÄ, zadnji, sekunda, dan, svetoven, konec, velik, Äas, kilometer
size of cluster: 1150
ğŸ§  Cluster 4 IZRAEL, PALESTINAâ†’ izraelski, gaza, izrael, napad, Älovek, palestinski, hamas, vojska, drÅ¾ava, izraelski vojska, libanon, ubit, pomoÄ, leto, sila, obmoÄje, ameriÅ¡ki, vojna, humanitaren, palestinec
size of cluster: 1645
ğŸ§  Cluster 5 SMUÄŒARSKI SKOKI - TUDI OLIMPIJSKE DISCIPLINE â†’ mesto, tekma, dober, olimpijski, svetoven, leto, finale, sezona, igra, pokal, toÄka, slovenski, sekunda, svetoven pokal, medalja, meter, prevc, skok, prvenstvo, Äas
size of cluster: 1865
ğŸ§  Cluster 6 AMERIKA - VLADA â†’ trump, predsednik, zda, leto, ameriÅ¡ki, harris, biden, volitev, drÅ¾ava, trumpov, zvezen, predsedniÅ¡ki, kandidat, nekdanji, sodiÅ¡Äe, donald, donald trump, demokratski, demokrat, sooÄenje
size of cluster: 586
ğŸ§  Cluster 7 NOGOMET â†’ minuta, tekma, toÄka, leto, real, barcelona, Å¾oga, liga, sezona, prvak, gol, klub, strel, manchester, finale, liverpool, zmaga, dober, zadetek, madrid
size of cluster: 720
ğŸ§  Cluster 8 SLOVENSKI Å PORT1 â†’ minuta, tekma, olimpija, toÄka, strel, blok, gol, liga, celje, sezona, zmaga, zadnji, ekipa, dober, Å¾oga, maribor, konec, polÄas, krka, vrata
size of cluster: 1019
ğŸ§  Cluster 9 SLOVENSKI Å PORT2 â†’ tekma, leto, sezona, klub, liga, ekipa, trener, dober, nov, igralec, reprezentanca, prvenstvo, olimpija, slovenski, prvak, evropski, slovenija, igra, pogodba, velik
size of cluster: 699
ğŸ§  Cluster 10 SLOVENSKI Å PORT3 â†’ tekma, slovenija, minuta, slovenski, dober, prvenstvo, toÄka, leto, igra, reprezentanca, skupina, liga, gol, evropski, ekipa, olimpijski, zmaga, zadnji, mesto, igralec
size of cluster: 1407
ğŸ§  Cluster 11 AVTOMOBILI, INDUSTRIJA â†’ elektriÄen, vozilo, avtomobil, leto, nov, model, velik, podjetje, voÅ¾nja, avtomobilski, motor, odstotek, kitajski, slovenija, elektriÄen vozilo, evro, evropski, pogon, proizvajalec, znamka
size of cluster: 546
ğŸ§  Cluster 12 GOSPODARSTVO â†’ odstotek, evro, leto, energija, cena, milijon, slovenija, milijon evro, nov, jedrski, drÅ¾ava, rast, podjetje, velik, elektrarna, zakon, projekt, druÅ¾ba, visok, podneben
size of cluster: 975
ğŸ§  Cluster 13 GASILSTVO, POÅ½ARI â†’ poÅ¾ar, gasilec, Älovek, eksplozija, obmoÄje, gasilski, objekt, poÅ¡kodovan, hiÅ¡a, velik, policija, stavba, ogenj, ura, mesto, Å¡koda, gaÅ¡enje, leto, dom, uprava
size of cluster: 317
ğŸ§  Cluster 14 VREME - TUDI TURIZEM â†’ temperatura, stopinja, sneg, slovenija, leto, dan, padavina, veter, celzij, stopinja celzij, moÄen, drÅ¾ava, velik, poplava, reka, visok, del, obmoÄje, ura, voda
size of cluster: 546
ğŸ§  Cluster 15 TURIZEM â†’ leto, Å¾ival, nov, slovenija, velik, kmetijski, drÅ¾ava, voda, Älovek, kmet, evro, hrana, odstotek, obmoÄje, ministrstvo, dan, mesto, milijon, vrsta, slovenski
size of cluster: 1112
ğŸ§  Cluster 16 NESREÄŒE â†’ nesreÄa, Älovek, letalo, voznik, leten, vozilo, policist, obmoÄje, leto, prometen, prometen nesreÄa, helikopter, kraj, poÅ¡kodovan, policija, reÅ¡evalec, drÅ¾ava, potres, policijski, ura
size of cluster: 939
ğŸ§  Cluster 17 ZAKONODAJA - TUDI GOSPODARSTVO â†’ leto, odstotek, zakon, predlog, vlada, evro, ministrstvo, delo, slovenija, javen, sindikat, plaÄa, nov, podjetje, delavec, deloven, pravica, drÅ¾ava, zaposlen, Å¡ola
size of cluster: 1925
ğŸ§  Cluster 18 RUSIJA, UKRAJINA â†’ ruski, ukrajina, ukrajinski, rusija, napad, drÅ¾ava, slovenija, leto, predsednik, vojna, evropski, vojaÅ¡ki, zda, zelenski, sila, Älovek, oblast, ameriÅ¡ki, trump, vojska
size of cluster: 2044
ğŸ§  Cluster 19 SLAVNI â†’ leto, film, smrt, vloga, skupina, kralj, slovenski, dan, delo, druÅ¾ina, velik, igralec, Å¾ivljenje, britanski, Äas, Älovek, svet, nekdanji, star, glasben
size of cluster: 548
ğŸ§  Cluster 20 SODIÅ ÄŒE, POLICIJA, KRIMINAL â†’ policija, policist, napad, dejanje, moÅ¡ki, Älovek, leto, policijski, kazniv, kazniv dejanje, preiskava, Å¡ola, otrok, osumljenec, leten, voznik, vozilo, ljubljana, mesto, Å¾rtev
size of cluster: 933
ğŸ§  Cluster 21 OBLASTI â†’ stranka, leto, volitev, vlada, sodiÅ¡Äe, predsednik, nov, evropski, drÅ¾ava, slovenija, odstotek, kandidat, komisija, policija, minister, poslanec, svet, parlament, drÅ¾aven, zakon
size of cluster: 2741
ğŸ§  Cluster 22 UMETNOST, KULTURA â†’ leto, razstava, muzej, delo, slovenski, nov, umetnost, mesto, del, slovenija, svet, umetnik, velik, galerija, prostor, Älovek, projekt, kulturen, Äas, kultura
size of cluster: 2587
ğŸ§  Cluster 23 GLASBA â†’ leto, festival, album, koncert, glasba, glasben, pesem, skladba, nov, skupina, zasedba, slovenski, velik, dan, slovenija, oder, dober, svet, Älovek, mesto
size of cluster: 1502
ğŸ§  Cluster 24 FILM â†’ film, leto, predstava, filmski, festival, nagrada, slovenski, zgodba, dober, gledaliÅ¡Äe, nov, reÅ¾iser, serija, vloga, Å¾ivljenje, Älovek, svet, velik, Äas, Å¾enska
size of cluster: 1384
ğŸ§  Cluster 25 LITERATURA â†’ leto, knjiga, roman, nagrada, slovenski, pesem, zgodba, zbirka, Å¾ivljenje, delo, Älovek, svet, literaren, poezija, Äas, pisatelj, jezik, knjiÅ¾nica, beseda, nov
size of cluster: 866

D Human-in-the-loop check:
Show random samples from clusters and verify if similar articles are indeed clustered together. Evaluate the quality of cluster labels or keywords extracted from each embedding.

1. Compute Embeddings:
TF-IDF embeddings â†’ Sparse, high-dimensional vectors.
SBERT embeddings â†’ Dense, semantic vectors.

2. Project Both Using UMAP:
Use identical UMAP parameters for both embeddings (e.g., n_neighbors=15, min_dist=0.1, metric='cosine' for consistency).

3. Evaluate and Compare:
Visual inspection: Check which method produces clearer, visually meaningful clusters.
Cluster evaluation metrics:
Silhouette Score: Measures how well separated clusters are.
Davies-Bouldin Index: Evaluates cluster compactness and separation.
Semantic/interpretability evaluation: Check how easy it is to interpret clusters.

----
TODO: mapping to some lower dimension... is this really necessary? or just performance

ntic alignment using embeddings, and it can give you a more direct, model-based evaluation of clustering quality â€” especially when traditional clustering metrics fail (like silhouette score on 2D projections).

âœ… Why Use Embedding-Based Evaluation?
Traditional metrics (e.g., Silhouette, Davies-Bouldin) rely on distances between points and fail when:

Clusters are non-spherical
Data is high-dimensional
There's semantic overlap between labels
Using embeddings allows you to evaluate semantic coherence and separation independently of geometry.

âœ… Options for Embedding-Based Evaluation
1. Intra-cluster vs Inter-cluster Cosine Similarity
2. Cluster Centroid Cosine Distances
    How close points are to their centroid (cohesion)
    How far centroids are from each other (separation)
âœ… Alternative: NMI or ARI with Ground Truth Labels
    If you have something like URL-based topics, you can also compute:

vse metode similar clustering, choosing based on visualization and perhaps on the last silhouette

kmeans ne bom kazal grafov pr drugih ker so bili slabsi, tudi ce evaluation direkt samo za dbscan recimo

Original DBSCAN for overlap

D DBSCAN vedno naredi okrog 27 clustrov
    uporabo umap pri embeddingih z berti smo razlozili
    SloBERTa kmeans evaluation
        just worse results, but similar display just a bit rotated and slower to compute
        
TODO: better display for keywords

Close results compare
{'Embedding': 'SLOBERTA-DBSCAN', 'Silhouette': 0.31070593, 'Davies-Bouldin': 1.026054296956046, 'ARI': 0.29383417882004975, 'NMI': 0.5639818237269971, 'Num Clusters': 28, 'Noise Points': 0, 'Embedding Alignment': 0.9986762, 'Avg NPMI': 0.09113513693637}
{'Embedding': 'SBERT-DBSCAN', 'Silhouette': 0.31920457, 'Davies-Bouldin': 1.0093945344303572, 'ARI': 0.2322979492079684, 'NMI': 0.49488931728741375, 'Num Clusters': 26, 'Noise Points': 0, 'Embedding Alignment': 0.9991281, 'Avg NPMI': 0.08708324263406085}
{'Embedding': 'TFIDF-DBSCAN', 'Silhouette': 0.32474416, 'Davies-Bouldin': 1.0185792309972688, 'ARI': 0.17818023641450698, 'NMI': 0.42428634930358, 'Num Clusters': 27, 'Noise Points': 0, 'Embedding Alignment': 0.9994208, 'Avg NPMI': 0.09520921248178979}
{'Embedding': 'SBERT-KMEANS', 'Silhouette': 0.3659727, 'Davies-Bouldin': 0.9945940220041651, 'ARI': 0.2323831969718441, 'NMI': 0.49544835436713974, 'Num Clusters': 26, 'Noise Points': 0, 'Embedding Alignment': 0.9991866, 'Avg NPMI': 0.09023254501353344}

{0: " HOKEJ",
1: " KOÅ ARKA",
2: " AMERIKA - VLADA",
3: " DIRKANJE - TUDI KOLESARJENJE",
4: " TENIS",
5: " IZRAEL, PALESTINA",
6: " SMUÄŒARSKI SKOKI - TUDI OLIMPIJSKE DISCIPLINE",
7: " NOGOMET",
8: " SLOVENSKI Å PORTI - TUDI KOÅ ARKA IN HOKEJ",
9: " SLOVENSKI Å PORTI - TUDI KOÅ ARKA IN HOKEJ",
10: " AVTOMOBILI, LETALA",
11: " GOSPODARSTVO",
12: " GASILSTVO, POÅ½ARI",
13: " TURIZEM",
14: " VREME - TUDI TURIZEM",
15: " SLOVENSKA POLITIKA",
16: " NESREÄŒE",
17: " POMEMBNI LJUDJE",
18: " ZAKONODAJA - TUDI GOSPODARSTVO",
19: " SODIÅ ÄŒE, POLICIJA, KRIMINAL",
20: " OBLASTI",
21: " ZGODOVINA",
22: " UMETNOST",
23: " GLASBA",
24: " LITERATURA",
25: " FILM"}


{0: "KOÅ ARKA",
1: "HOKEJ",
2: "TENIS",
3: "DIRKANJE - TUDI KOLESARJENJE",
4: "IZRAEL, PALESTINA",
5: "SMUÄŒARSKI SKOKI - TUDI OLIMPIJSKE DISCIPLINE",
6: "AMERIKA - VLADA",
7: "NOGOMET",
8: "SLOVENSKI Å PORT1",
9: "SLOVENSKI Å PORT2",
10: "SLOVENSKI Å PORT3",
11: "AVTOMOBILI, INDUSTRIJA",
12: "GOSPODARSTVO",
13: "GASILSTVO, POÅ½ARI",
14: "VREME - TUDI TURIZEM",
15: "TURIZEM",
16: "NESREÄŒE",
17: "ZAKONODAJA - TUDI GOSPODARSTVO",
18: "RUSIJA, UKRAJINA",
19: "SLAVNI",
20: "SODIÅ ÄŒE, POLICIJA, KRIMINAL",
21: "OBLASTI",
22: "UMETNOST, KULTURA",
23: "GLASBA",
24: "FILM",
25: "LITERATURA"}